
const btnSingin = document.getElementById("btnSingin");


btnSingin.addEventListener("click", checkCredentials);


function validateForm(){
    validateRequired(inputEmail);
    validateRequired(inputPassword);
}

function validateRequired(input) {
    if(input.value != '') {
        input.classList.add("is-valid");
        input.classList.remove("is-invalid");
    }
    else {
        input.classList.remove("is-valid");
        input.classList.add("is-invalid");
    }
} 

function validateMail(input){
    //Définir mon regex
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    const mailUser = input.value;
    if(mailUser.match(emailRegex)){
        input.classList.add("is-valid");
        input.classList.remove("is-invalid");
        return true;
    }
    else {
        input.classList.remove("is-valid");
        input.classList.add("is-invalid");
        return false;
    }    
}

function checkCredentials() {

    // Ici il faudra appeler l'API pur vérifier les credentials en BDD
     
   if(inputEmail.value == "administrateur@arcadia.fr" && inputPassword.value == "12345") {
        alert("Vous êtes connecté");

        // Il faudra récupérer le vrai token
        const token = "poiuytyueouafbmkjdbvm!qjbnmsjbùsown";
        setToken(token);
        //Placer ce token en cookie

        window.location.replace("/");
    }
    else{
        inputEmail.classList.add("is-invalid");
        inputPassword.classList.add("is-invalid");
    }
}

function isConnected() {
    if(getToken() == null || getToken == undefined) {
        return false;
    }
    else {
        return true;
    }
}
